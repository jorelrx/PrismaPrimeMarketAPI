#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ§ª Executando testes locais antes do push..."
echo "â³ Buildando o projeto..."

# Build do projeto
dotnet build --configuration Release --no-restore

if [ $? -ne 0 ]; then
  echo "âŒ Build falhou! Push bloqueado."
  exit 1
fi

echo "âœ… Build concluÃ­do com sucesso!"
echo "â³ Executando testes..."

# Executa os testes
dotnet test --no-build --configuration Release --verbosity normal

if [ $? -ne 0 ]; then
  echo "âŒ Testes falharam! Push bloqueado."
  echo "ğŸ’¡ Corrija os testes antes de fazer push."
  exit 1
fi

echo "âœ… Todos os testes passaram!"
echo "ğŸš€ Push liberado!"
